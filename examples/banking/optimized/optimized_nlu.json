{
  "predictor": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "augmented": true,
        "user_message": "how much do I have?",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "I want to send money to mom"
            },
            {
              "role": "assistant",
              "content": "How much?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom"
          },
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "amount"
          ],
          "current_prompted_slot": "amount",
          "conversation_state": "waiting_for_slot"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "How much money do I have?",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "I want to send money to mom"
            },
            {
              "role": "assistant",
              "content": "How much?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom"
          },
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "amount"
          ],
          "current_prompted_slot": "amount",
          "conversation_state": "waiting_for_slot"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "What's my balance?",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "I want to send money to mom"
            },
            {
              "role": "assistant",
              "content": "How much?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom"
          },
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "amount"
          ],
          "current_prompted_slot": "amount",
          "conversation_state": "waiting_for_slot"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Actually, not mom",
        "history": {
          "messages": [
            {
              "role": "assistant",
              "content": "To whom?"
            },
            {
              "role": "user",
              "content": "mom"
            },
            {
              "role": "assistant",
              "content": "How much?"
            },
            {
              "role": "user",
              "content": "100"
            },
            {
              "role": "assistant",
              "content": "Currency?"
            },
            {
              "role": "user",
              "content": "USD"
            },
            {
              "role": "assistant",
              "content": "From which account?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom",
            "amount": "100",
            "currency": "USD"
          },
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "account_type",
            "source_account",
            "recipient",
            "amount",
            "currency",
            "card_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "correction",
          "command": "transfer_funds",
          "slots": [
            {
              "name": "recipient",
              "value": null,
              "confidence": 0.95,
              "action": "modify",
              "previous_value": "mom"
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Pay someone",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "none",
          "expected_slots": [
            "account_type",
            "source_account",
            "recipient",
            "amount",
            "currency",
            "card_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "transfer_funds",
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "EUR",
        "history": {
          "messages": [
            {
              "role": "assistant",
              "content": "To whom?"
            },
            {
              "role": "user",
              "content": "mom"
            },
            {
              "role": "assistant",
              "content": "How much?"
            },
            {
              "role": "user",
              "content": "100"
            },
            {
              "role": "assistant",
              "content": "Currency?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom",
            "amount": "100"
          },
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "currency"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "slot_value",
          "command": "transfer_funds",
          "slots": [
            {
              "name": "currency",
              "value": "EUR",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Hola",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "none",
          "expected_slots": [
            "account_type",
            "source_account",
            "recipient",
            "amount",
            "currency",
            "card_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "greet",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Send funds",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "none",
          "expected_slots": [
            "account_type",
            "source_account",
            "recipient",
            "amount",
            "currency",
            "card_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "transfer_funds",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Yes, please proceed",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [],
          "available_flows": {},
          "current_flow": "example_flow",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "confirming"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "example_flow",
          "slots": [],
          "confidence": 0.95,
          "confirmation_value": true
        }
      },
      {
        "user_message": "Balance please",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "none",
          "expected_slots": [
            "account_type",
            "source_account",
            "recipient",
            "amount",
            "currency",
            "card_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Show me my balance",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "get_balance",
            "format_balance_message",
            "execute_transfer",
            "block_card_service",
            "say_hello"
          ],
          "available_flows": {
            "greet": "Greet the user",
            "check_balance": "Check how much money you have in your account balance",
            "transfer_funds": "Transfer money to another person",
            "block_card": "Block a lost or stolen card"
          },
          "current_flow": "none",
          "expected_slots": [
            "account_type",
            "source_account",
            "recipient",
            "amount",
            "currency",
            "card_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      }
    ],
    "signature": {
      "instructions": "Please analyze the user's input message within the dialogue context to determine their intent and extract any relevant slot values. Classify the message according to the following types: \n- **slot_value**: A value provided by the user for an expected slot.\n- **confirmation**: A yes/no response confirming or denying something.\n- **correction**: A correction of a previously provided slot value.\n- **modification**: A request to change a previously provided slot value.\n- **interruption**: An indication that the user wants to start or switch to a different flow from the available options.\n- **cancellation**: An indication that the user wants to abandon the current flow.\n- **digression**: A general inquiry that does not match any available flow.\n- **clarification**: A request for clarification about the current interaction.\n- **continuation**: A continuation of the conversation without a clear intent.\n\nEnsure to semantically match the user message to the descriptions of available flows, and if a match is found, classify it as an interruption with that flow name. Only use digression when the message does not align with any available flows. Extract any mentioned slot values and specify their action types appropriately, whether they are newly provided, corrected, or modified based on the user message.",
      "fields": [
        {
          "prefix": "User Message:",
          "description": "User's input message to analyze"
        },
        {
          "prefix": "History:",
          "description": "Conversation history (list of {role, content} messages)"
        },
        {
          "prefix": "Context:",
          "description": "Current dialogue state including flow, slots, and conversation phase"
        },
        {
          "prefix": "Current Datetime:",
          "description": "Current datetime (ISO format) for temporal expressions"
        },
        {
          "prefix": "Result:",
          "description": "Classified message with type, intent, slots, and confidence"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
