version: "1.0"
settings:
  models:
    nlu:
      provider: openai
      model: gpt-4o-mini

flows:
  booking_flow:
    description: "Complex booking flow with branches and jumps"
    process:
      - step: collect_destination
        type: collect
        slot: destination
      - step: verify_route
        type: action
        call: check_route_availability
        map_outputs:
          status: route_status
      - step: decide_path
        type: branch
        input: route_status
        cases:
          available: collect_dates
          unavailable: suggest_alternatives
          error: jump_to_error_handler
      - step: collect_dates
        type: collect
        slot: departure_date
        jump_to: __end__
      - step: suggest_alternatives
        type: action
        call: find_alternatives
      - step: error_handler
        type: action
        call: handle_error

slots:
  destination:
    type: string
    prompt: "Where would you like to go?"
  departure_date:
    type: string
    prompt: "When would you like to depart?"

actions:
  check_route_availability:
    description: "Check if route is available"
    inputs: [destination]
    outputs: [route_status]
  find_alternatives:
    description: "Find alternative routes"
    inputs: [destination]
    outputs: [alternatives]
  handle_error:
    description: "Handle errors"
    inputs: []
    outputs: []
