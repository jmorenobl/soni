{
  "predictor": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "augmented": true,
        "user_message": "I want to fly from Madrid to Barcelona",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "none",
          "expected_slots": [
            "origin",
            "destination",
            "departure_date",
            "return_date",
            "passengers",
            "cabin_class"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "book_flight",
          "slots": [
            {
              "name": "origin",
              "value": "Madrid",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            },
            {
              "name": "destination",
              "value": "Barcelona",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Book a flight from Paris to London tomorrow",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "none",
          "expected_slots": [
            "origin",
            "destination",
            "departure_date",
            "return_date",
            "passengers",
            "cabin_class"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "book_flight",
          "slots": [
            {
              "name": "origin",
              "value": "Paris",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": null
            },
            {
              "name": "destination",
              "value": "London",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": null
            },
            {
              "name": "departure_date",
              "value": "tomorrow",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "I need a flight to New York",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "none",
          "expected_slots": [
            "origin",
            "destination",
            "departure_date",
            "return_date",
            "passengers",
            "cabin_class"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "book_flight",
          "slots": [
            {
              "name": "destination",
              "value": "New York",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "I want to fly tomorrow",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "none",
          "expected_slots": [
            "origin",
            "destination",
            "departure_date",
            "return_date",
            "passengers",
            "cabin_class"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "book_flight",
          "slots": [
            {
              "name": "departure_date",
              "value": "tomorrow",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Los Angeles",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight",
              "result": {
                "command": "book_flight",
                "message_type": "interruption"
              }
            },
            {
              "user_message": "From Madrid",
              "result": {
                "command": "book_flight",
                "message_type": "slot_value",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination",
            "departure_date"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "slot_value",
          "command": "book_flight",
          "slots": [
            {
              "name": "destination",
              "value": "Los Angeles",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Tomorrow",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight",
              "result": {
                "command": "book_flight",
                "message_type": "interruption"
              }
            },
            {
              "user_message": "From Madrid to Barcelona",
              "result": {
                "command": "book_flight",
                "message_type": "slot_value",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  },
                  {
                    "name": "destination",
                    "value": "Barcelona"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "departure_date"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "slot_value",
          "command": "book_flight",
          "slots": [
            {
              "name": "departure_date",
              "value": "tomorrow",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Next Friday",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight",
              "result": {
                "command": "book_flight",
                "message_type": "interruption"
              }
            },
            {
              "user_message": "From New York to Los Angeles",
              "result": {
                "command": "book_flight",
                "message_type": "slot_value",
                "slots": [
                  {
                    "name": "origin",
                    "value": "New York"
                  },
                  {
                    "name": "destination",
                    "value": "Los Angeles"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "New York",
            "destination": "Los Angeles"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "departure_date"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2025-12-11T10:00:00",
        "result": {
          "message_type": "slot_value",
          "command": "book_flight",
          "slots": [
            {
              "name": "departure_date",
              "value": "next Friday",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Tokyo to Rome",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight",
              "result": {
                "command": "book_flight",
                "message_type": "interruption"
              }
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "origin",
            "destination",
            "departure_date"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "slot_value",
          "command": "book_flight",
          "slots": [
            {
              "name": "origin",
              "value": "Tokyo",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            },
            {
              "name": "destination",
              "value": "Rome",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "No, I said Los Angeles not Barcelona",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid to Barcelona tomorrow",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  },
                  {
                    "name": "destination",
                    "value": "Barcelona"
                  },
                  {
                    "name": "departure_date",
                    "value": "tomorrow"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "correction",
          "command": "book_flight",
          "slots": [
            {
              "name": "destination",
              "value": "Los Angeles",
              "confidence": 0.95,
              "action": "correct",
              "previous_value": "Barcelona"
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Actually, I want to leave next Monday",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid to Barcelona tomorrow",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  },
                  {
                    "name": "destination",
                    "value": "Barcelona"
                  },
                  {
                    "name": "departure_date",
                    "value": "tomorrow"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "modification",
          "command": "book_flight",
          "slots": [
            {
              "name": "departure_date",
              "value": "next Monday",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": "tomorrow"
            }
          ],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "No, for 3 passengers",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Paris to London next week",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Paris"
                  },
                  {
                    "name": "destination",
                    "value": "London"
                  },
                  {
                    "name": "departure_date",
                    "value": "next week"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Paris",
            "destination": "London",
            "departure_date": "next week"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "modification",
          "command": "book_flight",
          "slots": [
            {
              "name": "passengers",
              "value": 3,
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Actually, I meant Denver not Chicago",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight"
            },
            {
              "user_message": "Chicago"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Chicago"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "correction",
          "command": "book_flight",
          "slots": [
            {
              "name": "origin",
              "value": "Denver",
              "confidence": 0.95,
              "action": "correct",
              "previous_value": "Chicago"
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Change the destination to Tokyo",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid to Barcelona tomorrow",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  },
                  {
                    "name": "destination",
                    "value": "Barcelona"
                  },
                  {
                    "name": "departure_date",
                    "value": "tomorrow"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "modification",
          "command": "book_flight",
          "slots": [
            {
              "name": "destination",
              "value": "Tokyo",
              "confidence": 0.95,
              "action": "modify",
              "previous_value": "Barcelona"
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Can I modify the date to next Monday?",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid to Barcelona tomorrow",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  },
                  {
                    "name": "destination",
                    "value": "Barcelona"
                  },
                  {
                    "name": "departure_date",
                    "value": "tomorrow"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "modification",
          "command": "book_flight",
          "slots": [
            {
              "name": "departure_date",
              "value": "next Monday",
              "confidence": 0.9,
              "action": "provide",
              "previous_value": "tomorrow"
            }
          ],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "No, change the destination",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from New York to Los Angeles 2025-12-15",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "New York"
                  },
                  {
                    "name": "destination",
                    "value": "Los Angeles"
                  },
                  {
                    "name": "departure_date",
                    "value": "2025-12-15"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "New York",
            "destination": "Los Angeles",
            "departure_date": "2025-12-15"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "modification",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "No, change the origin",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from New York to Los Angeles 2025-12-15",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "New York"
                  },
                  {
                    "name": "destination",
                    "value": "Los Angeles"
                  },
                  {
                    "name": "departure_date",
                    "value": "2025-12-15"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "New York",
            "destination": "Los Angeles",
            "departure_date": "2025-12-15"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "modification",
          "command": "book_flight",
          "slots": [
            {
              "name": "origin",
              "value": null,
              "confidence": 0.0,
              "action": "modify",
              "previous_value": "New York"
            }
          ],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Cancel",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "origin"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "cancellation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Never mind",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid to Barcelona"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "departure_date"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "cancellation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Actually, cancel this",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight please"
            },
            {
              "user_message": "Boston"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Boston"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "cancellation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Cancel this",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "origin"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "cancellation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Continue",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "origin"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "continuation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Go ahead",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "continuation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Next",
        "history": {
          "messages": [
            {
              "user_message": "Book a hotel"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_hotels",
            "book_hotel",
            "modify_reservation",
            "cancel_reservation",
            "send_confirmation"
          ],
          "available_flows": {
            "book_hotel": "book_hotel",
            "search_hotels": "search_hotels",
            "check_reservation": "check_reservation",
            "modify_reservation": "modify_reservation",
            "cancel_reservation": "cancel_reservation"
          },
          "current_flow": "book_hotel",
          "expected_slots": [
            "location"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "continuation",
          "command": "book_hotel",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Move on",
        "history": {
          "messages": [
            {
              "user_message": "Reserve suite"
            }
          ]
        },
        "context": {
          "current_slots": {
            "room_type": "suite"
          },
          "available_actions": [
            "search_hotels",
            "book_hotel",
            "modify_reservation",
            "cancel_reservation",
            "send_confirmation"
          ],
          "available_flows": {
            "book_hotel": "book_hotel",
            "search_hotels": "search_hotels",
            "check_reservation": "check_reservation",
            "modify_reservation": "modify_reservation",
            "cancel_reservation": "cancel_reservation"
          },
          "current_flow": "book_hotel",
          "expected_slots": [
            "dates"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "continuation",
          "command": "book_hotel",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "What airlines fly that route?",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight from Madrid to Barcelona"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "departure_date"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "digression",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Do you have direct flights?",
        "history": {
          "messages": [
            {
              "user_message": "Flights to Paris"
            }
          ]
        },
        "context": {
          "current_slots": {
            "destination": "Paris"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "origin"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "digression",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Can I bring my pet?",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "origin"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "digression",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "What airports do you support?",
        "history": {
          "messages": [
            {
              "user_message": "I want to book a flight"
            },
            {
              "user_message": "San Francisco"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "San Francisco"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "digression",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Why do you need that?",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight"
            },
            {
              "user_message": "From Madrid"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "clarification",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Why do you need my passport number?",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight to New York"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "London",
            "destination": "New York"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "book_flight",
            "search_flights": "search_flights",
            "check_booking": "check_booking",
            "modify_booking": "modify_booking",
            "cancel_booking": "cancel_booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "passport_number"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "clarification",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      }
    ],
    "signature": {
      "instructions": "Analyze user messages in dialogue context to determine intent and extract slot values.\n\nCRITICAL: Mapping user messages to flows when current_flow=\"none\":\n- When current_flow=\"none\" and available_flows is not empty, you MUST check if the user message\n  matches any flow description semantically\n- Match user intent to flow descriptions: \"I want to book a flight\" matches \"Book a flight from origin to destination\"\n- If there's a semantic match, classify as INTERRUPTION and set command to the matching flow name\n- Flow names are the keys in available_flows (e.g., \"book_flight\", \"cancel_booking\")\n- Do NOT use CONTINUATION when user clearly wants to start a flow from available_flows\n\nExamples of correct mapping:\n- User: \"I want to book a flight\" + available_flows={\"book_flight\": \"Book a flight from origin to destination\"}\n  → INTERRUPTION, command=\"book_flight\"\n- User: \"Book a hotel\" + available_flows={\"book_hotel\": \"Book a hotel room\"}\n  → INTERRUPTION, command=\"book_hotel\"\n- User: \"I need to cancel\" + available_flows={\"cancel_booking\": \"Cancel an existing booking\"}\n  → INTERRUPTION, command=\"cancel_booking\"\n\nClassify message type and extract information based on context and available flows/actions.\n\nKey distinctions:\n\nDIGRESSION vs CLARIFICATION:\n- DIGRESSION: General question not about current step (e.g., \"What destinations do you fly to?\")\n- CLARIFICATION: Question about why current step needs information (e.g., \"Why do you need my email?\")\n\nMODIFICATION vs SLOT_VALUE:\n- MODIFICATION: User explicitly requests to change existing slot (e.g., \"Can I change destination to London?\")\n  * Slot already in current_slots\n  * User uses request phrases: \"change\", \"modify\", \"update\", \"can I change\"\n- SLOT_VALUE: User provides value directly (e.g., \"London\" when asked for destination)\n  * Direct answer to current prompt\n  * No request language, just provides value\n\nCANCELLATION vs INTERRUPTION:\n- CANCELLATION: User abandons current flow, no new flow in available_flows\n- INTERRUPTION: User wants to start a flow that exists in available_flows\n  * When current_flow=\"none\" and user mentions a flow from available_flows → INTERRUPTION\n  * When current_flow exists and user wants to switch to different flow → INTERRUPTION\n  * Set command to the flow name from available_flows (e.g., \"book_flight\")\n  * Examples: \"I want to book a flight\" → INTERRUPTION, command=\"book_flight\"\n             \"Book a hotel\" → INTERRUPTION, command=\"book_hotel\" (if in available_flows)\n\nCONFIRMATION vs CORRECTION vs MODIFICATION (when conversation_state=\"confirming\" or \"ready_for_confirmation\"):\n- CONFIRMATION: Generic yes/no response to confirmation prompt\n  * When conversation_state=\"confirming\" or \"ready_for_confirmation\", simple yes/no responses are CONFIRMATION\n  * \"Yes\", \"No\", \"That's correct\", \"That's not right\" → CONFIRMATION\n  * Set confirmation_value=True/False based on response\n  * Do NOT use CORRECTION unless user provides a specific corrected value\n- CORRECTION: User specifies which value is wrong AND provides correct value\n  * \"No, I meant Barcelona\" (mentions specific value + provides correction) → CORRECTION\n  * \"The date should be December 20th\" (provides corrected value) → CORRECTION\n  * \"No\" alone → CONFIRMATION (not CORRECTION, no value provided)\n- MODIFICATION: User says \"no\" AND requests to change a slot (with or without new value)\n  * \"No, change the destination\" → MODIFICATION (user wants to change, asks for new value)\n  * \"No, change the date to tomorrow\" → MODIFICATION with slot value\n  * \"No, I want to change the origin\" → MODIFICATION\n  * KEY: If user says \"no\" + asks to \"change/modify/update\" something → MODIFICATION, NOT CONFIRMATION!\n\nExtract slots with actions: provide (new), correct (reactive fix), modify (proactive change).",
      "fields": [
        {
          "prefix": "User Message:",
          "description": "User's input message to analyze"
        },
        {
          "prefix": "History:",
          "description": "Conversation history (list of {role, content} messages)"
        },
        {
          "prefix": "Context:",
          "description": "Current dialogue state including flow, slots, and conversation phase"
        },
        {
          "prefix": "Current Datetime:",
          "description": "Current datetime (ISO format) for temporal expressions"
        },
        {
          "prefix": "Result:",
          "description": "Classified message with type, intent, slots, and confidence"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
