{
  "predictor": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "augmented": true,
        "user_message": "How much do I have?",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "I want to transfer money to mom"
            },
            {
              "role": "assistant",
              "content": "How much would you like to transfer?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom"
          },
          "available_actions": [
            "execute_transfer",
            "get_balance"
          ],
          "available_flows": {
            "transfer_funds": "Transfer money between accounts or to other people",
            "check_balance": "Check your account balance or how much money you have"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "amount"
          ],
          "current_prompted_slot": "amount",
          "conversation_state": "waiting_for_slot"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "and what about my credit account?",
        "history": {
          "messages": [
            {
              "role": "assistant",
              "content": "Which account?"
            },
            {
              "role": "user",
              "content": "debit account"
            },
            {
              "role": "assistant",
              "content": "Your debit balance is USD 0.00."
            }
          ]
        },
        "context": {
          "current_slots": {
            "recipient": "mom"
          },
          "available_actions": [
            "execute_transfer",
            "get_balance"
          ],
          "available_flows": {
            "transfer_funds": "Transfer money between accounts or to other people",
            "check_balance": "Check your account balance or how much money you have"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [
            "amount"
          ],
          "current_prompted_slot": "amount",
          "conversation_state": "waiting_for_slot"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [
            {
              "name": "account_type",
              "value": "credit",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "what about credit?",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "How much do I have?"
            },
            {
              "role": "assistant",
              "content": "Which account?"
            },
            {
              "role": "user",
              "content": "debit"
            },
            {
              "role": "assistant",
              "content": "Your debit balance is USD 0.00."
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "execute_transfer",
            "get_balance"
          ],
          "available_flows": {
            "transfer_funds": "Transfer money between accounts or to other people",
            "check_balance": "Check your account balance or how much money you have"
          },
          "current_flow": "none",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "completed"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "check_balance",
          "slots": [
            {
              "name": "account_type",
              "value": "credit",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "Forget it",
        "history": {
          "messages": [
            {
              "user_message": "I want to buy a laptop"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_products",
            "add_to_cart",
            "process_payment",
            "track_shipment",
            "initiate_return"
          ],
          "available_flows": {
            "search_product": "Search for products by name or category",
            "add_to_cart": "Add products to your shopping cart",
            "checkout": "Complete purchase and payment",
            "track_order": "Track the status of an order shipment",
            "return_product": "Return a product and get a refund"
          },
          "current_flow": "search_product",
          "expected_slots": [
            "product"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "cancellation",
          "command": "search_product",
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "user_message": "I guess",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "Book flight to Paris tomorrow"
            },
            {
              "role": "assistant",
              "content": "Confirm: Flight to Paris, departing tomorrow?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "destination": "Paris",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "confirming"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.7,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Is my phone number necessary?",
        "history": {
          "messages": [
            {
              "user_message": "Checkout"
            }
          ]
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "search_products",
            "add_to_cart",
            "process_payment",
            "track_shipment",
            "initiate_return"
          ],
          "available_flows": {
            "search_product": "Search for products by name or category",
            "add_to_cart": "Add products to your shopping cart",
            "checkout": "Complete purchase and payment",
            "track_order": "Track the status of an order shipment",
            "return_product": "Return a product and get a refund"
          },
          "current_flow": "search_product",
          "expected_slots": [
            "phone"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "clarification",
          "command": "search_product",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "user_message": "I don't know",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Madrid to Barcelona tomorrow",
              "result": {
                "command": "book_flight",
                "message_type": "interruption",
                "slots": [
                  {
                    "name": "origin",
                    "value": "Madrid"
                  },
                  {
                    "name": "destination",
                    "value": "Barcelona"
                  },
                  {
                    "name": "departure_date",
                    "value": "tomorrow"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "ready_for_confirmation"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.7,
          "confirmation_value": null
        }
      },
      {
        "user_message": "What destinations do you fly to?",
        "history": {
          "messages": [
            {
              "user_message": "Book a flight from Boston"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Boston"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [
            "destination"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "digression",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Send 50 to dad",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [
            "execute_transfer",
            "get_balance",
            "activate_card_service",
            "block_card_service",
            "fetch_transactions"
          ],
          "available_flows": {
            "transfer_funds": "Transfer money between accounts or to other people",
            "check_balance": "Check your account balance or how much money you have",
            "activate_card": "Activate a new debit or credit card",
            "block_card": "Block a lost or stolen card",
            "transaction_history": "View recent transactions and account activity"
          },
          "current_flow": "none",
          "expected_slots": [
            "amount",
            "currency",
            "recipient",
            "account_type",
            "card_last_4"
          ],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "interruption",
          "command": "transfer_funds",
          "slots": [
            {
              "name": "amount",
              "value": "50",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            },
            {
              "name": "recipient",
              "value": "dad",
              "confidence": 0.95,
              "action": "provide",
              "previous_value": null
            }
          ],
          "confidence": 0.95,
          "confirmation_value": null
        }
      },
      {
        "user_message": "What do you mean by departure date?",
        "history": {
          "messages": []
        },
        "context": {
          "current_slots": {},
          "available_actions": [],
          "available_flows": {},
          "current_flow": "book_flight",
          "expected_slots": [
            "departure_date"
          ],
          "current_prompted_slot": "departure_date",
          "conversation_state": "waiting_for_slot"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "clarification",
          "command": null,
          "slots": [],
          "confidence": 0.85,
          "confirmation_value": null
        }
      },
      {
        "user_message": "Which account?",
        "history": {
          "messages": [
            {
              "user_message": "I want to transfer money"
            },
            {
              "result": {
                "command": "transfer_funds",
                "slots": [
                  {
                    "name": "amount",
                    "value": "100"
                  },
                  {
                    "name": "currency",
                    "value": "USD"
                  },
                  {
                    "name": "recipient",
                    "value": "mom"
                  }
                ]
              }
            }
          ]
        },
        "context": {
          "current_slots": {
            "amount": "100",
            "currency": "USD",
            "recipient": "mom"
          },
          "available_actions": [
            "execute_transfer",
            "get_balance",
            "activate_card_service",
            "block_card_service",
            "fetch_transactions"
          ],
          "available_flows": {
            "transfer_funds": "Transfer money between accounts or to other people",
            "check_balance": "Check your account balance or how much money you have",
            "activate_card": "Activate a new debit or credit card",
            "block_card": "Block a lost or stolen card",
            "transaction_history": "View recent transactions and account activity"
          },
          "current_flow": "transfer_funds",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": null
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "clarification",
          "command": "transfer_funds",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "maybe",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "Book a flight from Madrid to Barcelona tomorrow"
            },
            {
              "role": "assistant",
              "content": "I found these flights. Would you like to confirm the booking?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "confirming"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.8,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "hmm",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "Book a flight from Madrid to Barcelona tomorrow"
            },
            {
              "role": "assistant",
              "content": "Please review the details. Confirm?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "confirming"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.8,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "I don't know",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "Book a flight from Madrid to Barcelona tomorrow"
            },
            {
              "role": "assistant",
              "content": "Confirm this?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "confirming"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      },
      {
        "augmented": true,
        "user_message": "not sure",
        "history": {
          "messages": [
            {
              "role": "user",
              "content": "Book a flight from Madrid to Barcelona tomorrow"
            },
            {
              "role": "assistant",
              "content": "Is this correct?"
            }
          ]
        },
        "context": {
          "current_slots": {
            "origin": "Madrid",
            "destination": "Barcelona",
            "departure_date": "tomorrow"
          },
          "available_actions": [
            "search_flights",
            "book_flight",
            "modify_booking",
            "cancel_booking",
            "send_confirmation"
          ],
          "available_flows": {
            "book_flight": "Book flights between cities with departure and return dates",
            "search_flights": "Search for available flights and compare prices",
            "check_booking": "Check the status of an existing booking",
            "modify_booking": "Modify an existing flight booking",
            "cancel_booking": "Cancel a flight booking"
          },
          "current_flow": "book_flight",
          "expected_slots": [],
          "current_prompted_slot": null,
          "conversation_state": "confirming"
        },
        "current_datetime": "2024-12-11T10:00:00",
        "result": {
          "message_type": "confirmation",
          "command": "book_flight",
          "slots": [],
          "confidence": 0.9,
          "confirmation_value": null
        }
      }
    ],
    "signature": {
      "instructions": "In the context of a dialogue system, analyze the user's message to classify its intent into one of the predefined categories: slot_value, confirmation, correction, modification, interruption, cancellation, digression, clarification, or continuation. Utilize the following key rules to ensure accurate classification: \n\n1. Semantically match the user's message to the descriptions of available flows, avoiding reliance solely on exact wording.\n2. If a user's message aligns with an available flow, classify it as an interruption with the corresponding flow as the command and extract any relevant slot values provided by the user.\n3. Only categorize a message as digression when it does not match any existing flows.\n4. Extract slot values mentioned in the message, indicating the appropriate action type such as providing new values, correcting previous entries, or modifying existing ones.\n\nThis classification task aims to accurately capture the user's intent and extract necessary slot values for further processing, enhancing the functionality of the dialogue system in responding effectively to user inquiries.",
      "fields": [
        {
          "prefix": "User Message:",
          "description": "User's input message to analyze"
        },
        {
          "prefix": "History:",
          "description": "Conversation history (list of {role, content} messages)"
        },
        {
          "prefix": "Context:",
          "description": "Current dialogue state including flow, slots, and conversation phase"
        },
        {
          "prefix": "Current Datetime:",
          "description": "Current datetime (ISO format) for temporal expressions"
        },
        {
          "prefix": "Result:",
          "description": "Classified message with type, intent, slots, and confidence"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
